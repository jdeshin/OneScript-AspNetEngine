# WebBackgroundJobs

Библиотека, реализующая механизм фоновых заданий в http-сервисах OneScript.

## Установка

### HTTP-сервисы
Установка осуществляется копированием файлов dll в папку Bin веб-приложения.
Затем, необходимо подключить библиотеку, добавив нижеследующую строку в секцию <appSettings>, файла web.config:

```bsl
<add key="WebBackgroundJobs" value="attachAssembly" />
```

Настроить интервал проверки состояния фоновых заданий для метда ОжидатьЗавершения, можно добавив в раздел <appSettings>, файла web.config нижеследующий ключ:

```bsl
<add key="jobsCheckInterval" value="5000" />
```

Интервал задается в миллисекундах. Интервал проверки по умолчанию (если ключ не установлен) составляет 1000 миллисекунд.

## Описание

Библиотека реализует типы МенеджерФоновыхЗаданийWeb и ФоновоеЗаданиеWeb, которым в платформе 1С:Предприятие соответствуют типы МенеджерФоновыхЗаданий и ФоновоеЗадание соответственно. 

Тип МенеджерФоновыхЗаданийWeb реализует нижеследующие методы:

- Выполнить
- ОжидатьЗавершения
- ПолучитьФоновыеЗадания

Тип ФоновоеЗаданиеWeb реализует нижеследующие методы и свойства:

### Свойства

- ИмяМетода
- ИнформацияОбОшибке
- Ключ
- Конец
- Наименование
- Начало
- РазделениеДанных
- РегламентноеЗадание
- Состояние
- УникальныйИдентификатор

### Методы

- ОжидатьЗавершения
- Отменить
- ПолучитьСообщенияПользователю
- 

### Отличия от платформы 1С:Предприятие
Библиотека практически полностью совместима с платформой 1С:Предприятие на уровне кода, однако все-же имеются незначительные отличия.

1. В 


### Использование

```bsl
// Подключение внешней компоненты не требуется при использовании с http-сервисами,
// т.к. библиотека подключается через web.config
ПодключитьВнешнююКомпоненту("ПутьКПапкеСDll\MarkdigMarkdownProcessor.dll");

Процессор = Новый MarkdownПроцессорMarkdig;
// Список возможных расширений и их текстовое представление см. выше
Процессор.СконфигурироватьРасширения("yaml+advanced");
СтрокаMarkdown = "This is a text with some *emphasis*";

// Вызов без обработки расширений Markdown
СтрокаHtml = Процессор.ПолучитьHtmlИзMarkdown(СтрокаMarkdown);
СтрокаТекст = Процессор.ПолучитьСтрокуИзMarkdown(СтрокаMarkdown);

Сообщить(СтрокаHtml); // <p>This is a text with some <em>emphasis</em></p>
Сообщить(СтрокаТекст); // 

```
